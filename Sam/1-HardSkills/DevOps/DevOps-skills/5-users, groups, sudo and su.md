#### Типы пользователей
**root** (от англ. root - корень) - суперпользователь, аккаунт в UNIX-подобных системах, владелец которого имеет право на выполнение всех операций без исключения. Присутствует в системе по умолчанию.

**Системные пользователи** - системные процессы у которых есть учетные записи для управления привилегиями и правами доступа к файлам и каталогам. Создаются системой автоматически.

**Обычные пользователи** - учетные записи пользователей, допущенных к управлению системой. Создаются системным администратором.

Каждый пользователь помимо имени имеет числовой идентификатор пользователя **UID** (User IDentificator). Пользователь root имеет идентификатор 0. Системные пользователи имеют идентификаторы от 1 до 100. Обычные пользователи имеют UID от 100.

Пользователи могут объединяться в группы. Каждый пользователь обязательно входит в ту или иную группу. Группы имеют числовой идентификатор группы **GID** (Group IDentificator).

---
#### Создание пользователя и настройки sudo
```bash
groupadd dev
groupadd development

# show all groups
cat /etc/group 

# show needed groups 
cat /etc/group | grep (group name) 

useradd -m dev -G development -s /bin/bash -p riser12345 -d /home/development -g dev

# show all users
cat /etc/passwd

# change password for user
passwd (user-name)

# sudo or su
```

В CentOS 8 есть группа ***wheel*,** участники этой группы имеют все права суперпользователей.

`usermod` - меняет настройки пользователя
```bash
# Add user dev to wheel group
usermod -aG wheel dev 

# show user groups 
groups dev 
```

Имея привилегия sudo можно зайти за root-пользователя:
```bash
sudo -s
```

> Риск повредить систему root-пользователем и sudo-пользователем одинаковы. Это не защищает от ошибок. 

---
#### Зачем нужно деление на root и sudo?
- Нужно для защиты от хакерских атак, обычно они атакуют root-пользователя так как root-пользователь есть в любой системе и основная мера защиты от таких атак это запрет авторизации через root-пользователя. 
- Можно передать администраторский уровень другим пользователям не боясь компроментации пароля root-пользователя. Так как при использовании `sudo` любой пользователь вводит свой пароль, а не парол от root-пользователя.

---
#### Отключение возможность авторизации через пользователя root

В конфиге /etc/ssh/sshd_config нужно найти строку:
```
PermitRootLogin yes
```
 и изменить на:
```
PermitRootLogin no
```

Теперь нужно перенести файл с авторизованными ключами к пользователю dev.

#### Просмотр логов авторизации
```
tail -f /var/log/audit/audit.log

# or 

journalctl -u sshd 
```

#### Изменить права доступа для директории .ssh
```bash
chmod g-w /home/development/
chmod 700 ~/.ssh
sudo chmod 600 ~/.ssh/authorized_keys

# если не работает, смотри на группу и пользователя файла 
ls -l
```

#### Команда chown
Синтаксис chown, как и других подобных команд linux очень прост:

```
$ chown пользователь:группа опции /путь/к/файлу
```

В поле пользователь надо указать пользователя, которому мы хотим передать файл. Также можно указать через двоеточие группу, например, **пользователь:группа**. Тогда изменится не только пользователь, но и группа. Вот основные опции, которые могут вам понадобиться:

-   **-c, --changes** - подробный вывод всех выполняемых изменений;
-   **-f, --silent, --quiet** - минимум информации, скрыть сообщения об ошибках;
-   **--dereference** - изменять права для файла к которому ведет символическая ссылка вместо самой ссылки (поведение по умолчанию);
-   **-h, --no-dereference** - изменять права символических ссылок и не трогать файлы, к которым они ведут;
-   **--from** - изменять пользователя только для тех файлов, владельцем которых является указанный пользователь и группа;
-   **-R, --recursive** - рекурсивная обработка всех подкаталогов;
-   **-H** - если передана символическая ссылка на директорию - перейти по ней;
-   **-L** - переходить по всем символическим ссылкам на директории;
-   **-P** - не переходить по символическим ссылкам на директории (по умолчанию).